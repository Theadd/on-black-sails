
<% if(flash && (flash.err || flash.msg)) { %>
<div class="row">
  <div class="col-xs-12">

    <% if(flash && flash.err) { %>
    <% Object.keys(flash.err).forEach(function(error) { %>
    <div class="alert alert-danger" role="alert">
      <a href="#" class="close" data-dismiss="alert">&times;</a>
      <%- flash.err[error].message %>
    </div>
    <% }) %>
    <% } %>

    <% if(flash && flash.msg) { %>
    <% Object.keys(flash.msg).forEach(function(msg) { %>
    <div class="alert alert-success" role="alert">
      <a href="#" class="close" data-dismiss="alert">&times;</a>
      <%- flash.msg[msg].message %>
    </div>
    <% }) %>
    <% } %>

  </div>
</div>
<% } %>

<div class="row">
  <div class="col-lg-12">
    <div class="widget">
      <div class="widget-header">
        <i class="fa fa-puzzle-piece"></i> Local Cluster
        <div class="clearfix"></div>
      </div>
      <div class="widget-body narrow">

        <ul class="plastic-list">
          <% _.each(clusters, function(cluster) { %>
          <a href="/localcluster/edit/<%= cluster.id %>" class="item" data-id="<%= cluster.id %>">

            <div class="body">

              <span class="cell col-md-2 col-sm-3 col-xs-3 box-default">
                <span class="plastic-tag uppercase center shadow small">
                  <%= (cluster.master) ? 'Master' : 'Slave' %>
                </span>
              </span>
              <span class="cell col-md-9 col-sm-8 col-xs-7 box-lightblue">
                <span class="plastic-tag title"><%= cluster.name %> @ <%= cluster.url || "Unknown" %></span>
              </span>

              <span class="cell col-md-1 col-sm-1 col-xs-2 box-<%= (cluster.running) ? 'success' : 'danger' %>">
                <span class="plastic-tag uppercase white small center shadow dashboard-agreement-process-ready"><%= (cluster.running) ? 'ON' : 'OFF' %></span>
              </span>
            </div>

          </a>
          <% }) %>
        </ul>

      </div>
    </div>
  </div>
</div>